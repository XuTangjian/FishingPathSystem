<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>学习统计</h2>
        <ol class="breadcrumb">
            <li>
                <a href="index.jsp">首页</a>
            </li>
            <li>
                <a>学习管理</a>
            </li>
            <li class="active">
                <strong>学习统计</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>
<div class="wrapper wrapper-content  animated fadeInRight">
    <div class="row">
        <div class="col-sm-8">
            <div class="ibox">
                <div class="ibox-content">
                    <h2>学习统计</h2>
                    <div class="input-group">
                        <input type="text" placeholder="搜索员工 " class="input form-control">
                        <span class="input-group-btn">
                                        <button type="button" class="btn btn btn-primary"> <i class="fa fa-search"></i> 查找</button>
                                </span>
                    </div>
                    <div class="clients-list">
                        <ul class="nav nav-tabs">
                            <span class="pull-right small text-muted">{{staffCount}}名员工</span>
                            <li ng-repeat="departmentDTO in enterpriseDTO.departmentDTOList" ng-class="{'active' : tab == enterpriseDTO.departmentDTOList[$index].department.id}"><a ng-click="tabChange(enterpriseDTO.departmentDTOList[$index].department.id)"><i class="fa fa-user"></i>{{departmentDTO.department.name}}</a></li>
                        </ul>
                        <div class="tab-content">
                            <div ng-repeat="departmentDTO in enterpriseDTO.departmentDTOList" class="tab-pane active" ng-show="tab == enterpriseDTO.departmentDTOList[$index].department.id">
                                <div class="full-height-scroll" full-scroll>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <tbody>
                                            <th>
                                                <td>名称</td>
                                                <td>部门</td>
                                                <td>职位</td>
                                                <td>正在学习 </td>
                                                <td>状态</td>
                                            </th>
                                            <tr ng-repeat="staffDTO in departmentDTO.staffDTOList">
                                                <td class="client-avatar"><img alt="image" ng-src="{{staffDTO.staff.user.logoPath}}"> </td>
                                                <td><a ng-click="clientChange(staffDTO.staff.id,$index)" class="client-link">{{staffDTO.staff.user.name}}</a></td>
                                                <td> {{staffDTO.staff.department.name}} </td>
                                                <td> {{staffDTO.staff.postType.name}} </td>
                                                <td><div ng-if="staffDTO.learningPathList.length>0">{{staffDTO.learningPathList[staffDTO.learningPathList.length-1].learningRecordList[staffDTO.learningPathList[staffDTO.learningPathList.length-1].learningRecordList.length-1].course.name}}</div> </td>
                                                <td class="client-status"><span class="label label-primary">学习中</span></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="ibox ">

                <div class="ibox-content">
                    <div class="tab-content">
                        <div ng-repeat="departmentDTO in enterpriseDTO.departmentDTOList">
                            <div ng-repeat="staffDTO in departmentDTO.staffDTOList" class="tab-pane active" ng-show="client == departmentDTO.staffDTOList[$index].staff.id">
                                <div class="row m-b-lg">
                                    <div class="col-lg-12 text-center">
                                        <div class="m-b-sm">
                                            <img alt="image" class="img-circle" ng-src="{{staffDTO.staff.user.logoPath}}"
                                                 style="width: 62px">
                                        </div>
                                        <h2>{{staffDTO.staff.user.name}}</h2>
                                        <strong>
                                            {{staffDTO.staff.department.name}}
                                        </strong>
                                        <p>
                                            {{staffDTO.staff.postType.name}}
                                        </p>
                                        <button type="button" class="btn btn-primary btn-sm btn-block"><i
                                                class="fa fa-envelope"></i> 发送消息
                                        </button>
                                    </div>
                                </div>
                                <div class="client-detail">
                                    <div class="full-height-scroll" full-scroll>
                                        <div ng-repeat="learningPath in staffDTO.learningPathList">
                                            <strong>{{learningPath.name}}</strong>
                                            <div id="vertical-timeline" class="vertical-container dark-timeline">
                                                <div ng-repeat="learningRecord in learningPath.learningRecordList" class="vertical-timeline-block">
                                                    <div class="vertical-timeline-icon gray-bg">
                                                        <i class="fa fa-book"></i>
                                                    </div>
                                                    <div class="vertical-timeline-content">
                                                        <p>{{learningRecord.course.name}}
                                                        </p>
                                                        <span class="vertical-date small text-muted"> {{learningRecord.lastLearningTime}} </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>